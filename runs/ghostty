#!/usr/bin/env bash
set -e

# -----------------------------
# Ghostty (prebuilt tarball)
# -----------------------------

BIN_DIR="$HOME/.local/bin"
TMP_DIR="$(mktemp -d)"

mkdir -p "$BIN_DIR"

# If already installed, skip
if command -v ghostty >/dev/null; then
    echo "ghostty already installed"
    exit 0
fi

# Download latest Linux x86_64 build
curl -L \
  https://github.com/ghostty-org/ghostty/releases/latest/download/ghostty-linux-x86_64.tar.gz \
  -o "$TMP_DIR/ghostty.tar.gz"

# Extract
tar -xzf "$TMP_DIR/ghostty.tar.gz" -C "$TMP_DIR"

# Install binary
install -m 0755 "$TMP_DIR/ghostty" "$BIN_DIR/ghostty"

# Cleanup
rm -rf "$TMP_DIR"

echo "ghostty installed to $BIN_DIR/ghostty"
